package  {	import flash.display.MovieClip;	import flash.events.Event;	import com.santiago.player.*;	import com.santiago.player.ad.XMLLoader;	import com.santiago.player.ad.Vpaiding;	import com.jerry.playlist.PlayList;	import flash.external.ExternalInterface;	import flash.display.LoaderInfo;			[SWF( width = 940, height = 498, frameRate = 25, backgroundColor = 0x000000 )]		public class Main extends MovieClip{				/**所测试的广告数据地址*/		//static const url:String = "http://bsch.serving-sys.com/BurstingPipe/adServer.bs?cn=is&c=23&pl=VAST&pli=6793001&PluID=56&pos=3614&ord=[timestamp]&cim=1&t=1&ai=13958751";		//static const url:String = "http://bsch.serving-sys.com/BurstingPipe/adServer.bs?cn=is&c=23&pl=VAST&pli=6793003&PluID=56&pos=1397&ord=[timestamp]&cim=1&t=1&ai=13958767";				private var xmlLoader:XMLLoader;		private var vpad:Vpaiding;						private var myplayer:Player;				static const str:String = "sample.flv"; //video.flv		//var xml_url:String = "playlist.xml";		private var _playlist:PlayList;				private var _loadinfo:*;				public function Main() {									this.addEventListener( Event.ADDED_TO_STAGE,onAddToStage );		}				private function onAddToStage( event:Event = null ):void		{						_loadinfo = this.loaderInfo.parameters;			//Log(_loadinfo.vidpath);			myplayer =  new Player(940,498,true,"sample.flv");			this.addChild(myplayer);						_playlist = new PlayList(this,200,498*0.94);			//点击列表项触发的回调函数			_playlist.clickCallback = listItemClicked;						var getvidpath: String = _playlist.setItemTriggerIndex(_loadinfo.vidindex);			var loadedsource:Object = _loadinfo.vidindex?{videopath:str,adpath:getvidpath}:{videopath:str};			//Log(loadedsource.adpath);			myplayer.loadsource(loadedsource);						/*for dev;			var vtad:String = "http://bsch.serving-sys.com/BurstingPipe/adServer.bs?cn=is&c=23&pl=VAST&pli=6793008&PluID=56&pos=2797&ord=1393207996123&cim=1&t=1&ai=13958783";			var vpad:String = "http://bsch.serving-sys.com/BurstingPipe/adServer.bs?cn=is&c=23&pl=VAST&pli=8733810&PluID=56&pos=4420&ord=[timestamp]&cim=1";			var nonad:String = "http://bsch.serving-sys.com/BurstingPipe/adServer.bs?cn=is&c=23&pl=VAST&pli=5946716&PluID=56&pos=5826&ord=[timestamp]&cim=1";			var nonad1:String = "http://bs.serving-sys.com/BurstingPipe/adServer.bs?cn=is&c=23&pl=VAST&pli=5169845&PluID=0&pos=2634&ord=[timestamp]&cim=1?;frmt=0;frmt=1;frmt=22;plID=1811627600001;onLd=1;ord=333212090?";			myplayer.loadsource({videopath:str,adpath:nonad});			*/						myplayer.addEventListener(ActionEvent.NOTIFIER, onNotifier);		}				private function listItemClicked(e:Object):void{			var video_title:String = e._title;			var video_description:String = e._description;			var video_url:String = e._video;			this.Log(video_url);			myplayer.loadsource({videopath:str,adpath:video_url});						myplayer..dispatchEvent(new ActionEvent(ActionEvent.WITHPLAYLIST));			ExternalInterface.call("getAdInfo",[e._title,e._description]);		}				private function onNotifier(event:ActionEvent):void{			trace("notifier message: "+event.data);			_playlist.toggleExpand();			}		public function Log(log:String):void{			trace(log);			ExternalInterface.call("console.log", log);			}			}	}